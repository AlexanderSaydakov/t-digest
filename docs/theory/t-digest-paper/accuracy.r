x = read.delim("accuracy.csv")
png("accuracy-1.png", width=1800, height=600, pointsize=36)
x$kb = x$size/1000
old = par(mar=c(5.1, 4.1,1.9,1))
layout(matrix(c(1,2,3,4), 1, 4, byrow=T), widths=c(1.28,1,1,1))
plot(100*error ~ kb, x[x$q==0.5,], ylim=c(-2,2), log='x', ylab="Error (%)", xlab="Size in kB", main="q = 0.5", cex=0.7, pch=21, bg='#00000080', col='#00000080')
box(col='black', lwd=3)
par(mar=c(5.1,0,1.9,1))
plot(100*error ~ kb, x[x$q==0.1,], ylim=c(-2,2), log='x', ylab=NA, xlab="Size in kB", main="q = 0.1", yaxt='n', cex=0.7, pch=21, bg='#00000080', col='#00000080')
box(col='black', lwd=3)
plot(100*error ~ kb, x[x$q==0.01,], ylim=c(-2,2), log='x', ylab=NA, xlab="Size in kB", main="q = 0.01", yaxt='n', cex=0.7, pch=21, bg='#00000080', col='#00000080')
box(col='black', lwd=3)
plot(100*error ~ kb, x[x$q==0.001,], ylim=c(-2,2), log='x', ylab=NA, xlab="Size in kB", main="q = 0.001", yaxt='n', cex=0.7, pch=21, bg='#00000080', col='#00000080')
box(col='black', lwd=3)
par(old)
dev.off()


png("accuracy-2.png", width=1800, height=900, pointsize=28)
layout(matrix(c(1,2), 1, 2, byrow=T), widths=c(1,1))
plot(kb ~ compression, x, log='xy', xlab=expression(1/delta), ylab="Size (kB)", main="Size versus compression parameter", cex=0.01)
box(col='black', lwd=3)
lines(x$compression, exp(-1.65 + log(x$compression)*0.87), col='grey')
points(kb ~ compression, x, pch=21, cex=0.5, bg='#00000080', col='#00000080')
text(6,32,"# samples = 100k")

z = read.delim('size-scale.csv')
plot( size1/1000 ~ samples,z[z$compression==50,], log='x', pch=21, cex=0.5, bg='#00000080', col='#00000080', xlab = "Samples x 1000", ylab = "Size (kB)", main="Size versus number of samples")
text(20,5.3, expression(1/delta == 50))
box(col='black', lwd=3)
lines(seq(10,11000,10), predict(lm( size1 ~ log(samples),z[z$compression==50,]), newdata=data.frame(samples=seq(10,11000,10)))/1000, col='grey', lwd=3)
dev.off()
